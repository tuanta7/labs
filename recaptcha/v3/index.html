<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document Title</title>
    <script src="https://www.google.com/recaptcha/api.js?render=6LdyGEEsAAAAAIzSTOItVzcAhsjyKkpaCBkoCbl6"></script>
  </head>
  <body>
    <h1>Hello, World!</h1>
    <button onclick="onClick(event)">Submit</button>
    <script>
      function onClick(e) {
        e.preventDefault();
        grecaptcha.ready(function () {
          grecaptcha
            .execute("6LdyGEEsAAAAAIzSTOItVzcAhsjyKkpaCBkoCbl6", {
              action: "submit",
            })
            .then(function (token) {
              return fetch("http://localhost:3000/verify", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({ token }),
              });
            })
            .then(function (response) {
              return response.json();
            })
            .then(function (data) {
              console.log("Verification result:", data);
              alert(
                data.success
                  ? "reCAPTCHA verified successfully!"
                  : "reCAPTCHA verification failed"
              );
            })
            .catch(function (error) {
              console.error("Error:", error);
              alert("Error verifying reCAPTCHA");
            });
        });
      }
    </script>
  </body>
</html>
